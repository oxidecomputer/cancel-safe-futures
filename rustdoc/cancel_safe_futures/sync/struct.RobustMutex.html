<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A cancel-safe and panic-safe variant of `tokio::sync::Mutex`."><title>RobustMutex in cancel_safe_futures::sync - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-c5d6553a23f1e5a6.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="cancel_safe_futures" data-themes="" data-resource-suffix="" data-rustdoc-version="1.81.0 (eeb90cda1 2024-09-04)" data-channel="1.81.0" data-search-js="search-d234aafac6c221dd.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-d2fab2bf619172d3.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../cancel_safe_futures/index.html">cancel_safe_futures</a><span class="version">0.1.5</span></h2></div><h2 class="location"><a href="#">RobustMutex</a></h2><div class="sidebar-elems"><section><h3><a href="#implementations">Methods</a></h3><ul class="block method"><li><a href="#method.blocking_lock">blocking_lock</a></li><li><a href="#method.const_new">const_new</a></li><li><a href="#method.get_mut">get_mut</a></li><li><a href="#method.into_inner">into_inner</a></li><li><a href="#method.is_cancel_poisoned">is_cancel_poisoned</a></li><li><a href="#method.is_panic_poisoned">is_panic_poisoned</a></li><li><a href="#method.is_poisoned">is_poisoned</a></li><li><a href="#method.lock">lock</a></li><li><a href="#method.new">new</a></li><li><a href="#method.try_lock">try_lock</a></li></ul><h3><a href="#trait-implementations">Trait Implementations</a></h3><ul class="block trait-implementation"><li><a href="#impl-Debug-for-RobustMutex%3CT%3E">Debug</a></li><li><a href="#impl-Default-for-RobustMutex%3CT%3E">Default</a></li><li><a href="#impl-From%3CT%3E-for-RobustMutex%3CT%3E">From&lt;T&gt;</a></li></ul><h3><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul class="block synthetic-implementation"><li><a href="#impl-Freeze-for-RobustMutex%3CT%3E">!Freeze</a></li><li><a href="#impl-RefUnwindSafe-for-RobustMutex%3CT%3E">!RefUnwindSafe</a></li><li><a href="#impl-UnwindSafe-for-RobustMutex%3CT%3E">!UnwindSafe</a></li><li><a href="#impl-Send-for-RobustMutex%3CT%3E">Send</a></li><li><a href="#impl-Sync-for-RobustMutex%3CT%3E">Sync</a></li><li><a href="#impl-Unpin-for-RobustMutex%3CT%3E">Unpin</a></li></ul><h3><a href="#blanket-implementations">Blanket Implementations</a></h3><ul class="block blanket-implementation"><li><a href="#impl-Any-for-T">Any</a></li><li><a href="#impl-Borrow%3CT%3E-for-T">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E-for-T">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-From%3C!%3E-for-T">From&lt;!&gt;</a></li><li><a href="#impl-From%3CT%3E-for-T">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E-for-T">Into&lt;U&gt;</a></li><li><a href="#impl-TryFrom%3CU%3E-for-T">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E-for-T">TryInto&lt;U&gt;</a></li></ul></section><h2><a href="index.html">In cancel_safe_futures::sync</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Struct <a href="../index.html">cancel_safe_futures</a>::<wbr><a href="index.html">sync</a>::<wbr><a class="struct" href="#">RobustMutex</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/cancel_safe_futures/sync/mutex.rs.html#177-180">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub struct RobustMutex&lt;T: ?<a class="trait" href="https://doc.rust-lang.org/1.81.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; { <span class="comment">/* private fields */</span> }</code></pre><span class="item-info"><div class="stab portability">Available on <strong>crate feature <code>std</code></strong> only.</div></span><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A cancel-safe and panic-safe variant of <a href="../../tokio/sync/mutex/struct.Mutex.html" title="struct tokio::sync::mutex::Mutex"><code>tokio::sync::Mutex</code></a>.</p>
<p>A <code>RobustMutex</code> is a wrapper on top of a <a href="../../tokio/sync/mutex/struct.Mutex.html" title="struct tokio::sync::mutex::Mutex"><code>tokio::sync::Mutex</code></a> which adds two further
guarantees: <em>panic safety</em> and <em>cancel safety</em>. Both of these guarantees are implemented to
ensure that mutex invariants aren’t violated to the greatest extent possible.</p>
<h2 id="motivation"><a class="doc-anchor" href="#motivation">§</a>Motivation</h2>
<p>A mutex is a synchronization structure which allows only one task to access some data at a time.
The general idea behind a mutex is that the data it owns has some <em>invariants</em>. When a task
acquires a lock on the mutex, it enters a <em>critical section</em>. Within this critical section, the
invariants can temporarily be violated. It is expected that the task will restore those
invariants before releasing the lock.</p>
<p>For example, let’s say that we have a mutex which guards two <code>HashMap</code>s, with the invariant that
mutex are that the two <code>HashMap</code>s always contain the same keys. With a Tokio mutex, you might
write something like:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::collections::HashMap;
<span class="kw">use </span>tokio::sync::Mutex;

<span class="kw">struct </span>MyStruct {
    map1: HashMap&lt;String, String&gt;,
    map2: HashMap&lt;String, u32&gt;,
}

<span class="kw">impl </span>MyStruct {
    <span class="kw">fn </span>new() -&gt; <span class="self">Self </span>{
        <span class="self">Self </span>{
            map1: HashMap::new(),
            map2: HashMap::new(),
        }
    }
}

<span class="attr">#[tokio::main]
</span><span class="kw">async fn </span>main() {
    <span class="kw">let </span>mutex = Mutex::new(MyStruct::new());

    <span class="kw">let </span><span class="kw-2">mut </span>guard = mutex.lock().<span class="kw">await</span>;
    guard.map1.insert(<span class="string">"hello"</span>.to_owned(), <span class="string">"world"</span>.to_owned());  <span class="comment">// (1)
    // ... some code in between
    </span>guard.map2.insert(<span class="string">"hello"</span>.to_owned(), <span class="number">42</span>);  <span class="comment">// (2)

    // (This happens implicitly but is made explicit here.)
    </span>std::mem::drop(guard);
}</code></pre></div>
<p>At point (1) we’ve temporarily violated the invariant that <code>map1</code> and <code>map2</code> contain the same
keys. However, at point (2) the invariant is restored.</p>
<ul>
<li>
<p>But what if the task panics between (1) and (2)? In that case, the mutex is left in a state
where the invariants are violated. This is a problem because this is an inconsistent state –
other tasks which acquire the lock can no longer assume that the invariants are upheld.</p>
<p>This is the problem that <em>panic safety</em> solves.</p>
</li>
<li>
<p>In async code, what if there’s an await point between (1) and (2), and the future is dropped
at that await point? Then, too, the invariants are violated. With synchronous code the only
possible interruptions in the middle of a critical section are due to panics, but with async
code cancellations are a fact of life.</p>
<p>This is the problem that <em>cancel safety</em> solves.</p>
</li>
</ul>
<p>Both of these problems can also be solved in an ad-hoc manner (for example, by carefully
checking for and restoring invariants at the start of each critical section). However, <strong>the
goal of this mutex is to provide a systematic, if conservative, solution to these problems.</strong></p>
<h2 id="panic-safety"><a class="doc-anchor" href="#panic-safety">§</a>Panic safety</h2>
<p>Like <a href="https://doc.rust-lang.org/1.81.0/std/sync/mutex/struct.Mutex.html" title="struct std::sync::mutex::Mutex"><code>std::sync::Mutex</code></a> but <em>unlike</em> <a href="../../tokio/sync/mutex/struct.Mutex.html" title="struct tokio::sync::mutex::Mutex"><code>tokio::sync::Mutex</code></a>, this mutex implements a strategy
called “poisoning” where a mutex is considered poisoned whenever a task panics within one of the
<a href="struct.ActionPermit.html" title="struct cancel_safe_futures::sync::ActionPermit"><code>ActionPermit</code></a> perform methods. Once a mutex is poisoned, all other tasks are unable to access
the data by default.</p>
<p>This means that the <a href="struct.RobustMutex.html#method.lock" title="method cancel_safe_futures::sync::RobustMutex::lock"><code>lock</code></a> and <a href="struct.RobustMutex.html#method.try_lock" title="method cancel_safe_futures::sync::RobustMutex::try_lock"><code>try_lock</code></a> methods return a
<a href="https://doc.rust-lang.org/1.81.0/core/result/enum.Result.html" title="enum core::result::Result"><code>Result</code></a> which indicates whether a mutex has been poisoned or not. Most usage of a mutex will
simply <a href="https://doc.rust-lang.org/1.81.0/core/result/enum.Result.html#method.unwrap" title="method core::result::Result::unwrap"><code>unwrap()</code></a> these results, propagating panics among tasks to ensure that
a possibly invalid invariant is not witnessed.</p>
<p>A poisoned mutex, however, does not prevent all access to the underlying data. The
<a href="struct.PoisonError.html" title="struct cancel_safe_futures::sync::PoisonError"><code>PoisonError</code></a> type has an
<a href="struct.PoisonError.html#method.into_inner" title="method cancel_safe_futures::sync::PoisonError::into_inner"><code>into_inner</code></a> method which will return the guard that
would have otherwise been returned on a successful lock. This allows access to the data, despite
the lock being poisoned.</p>
<h2 id="cancel-safety"><a class="doc-anchor" href="#cancel-safety">§</a>Cancel safety</h2>
<p>To guard against async cancellations in the middle of the critical section, the mutex uses a
callback approach. This is done by returning <a href="struct.ActionPermit.html" title="struct cancel_safe_futures::sync::ActionPermit"><code>ActionPermit</code></a> instances which provide access to
the guarded data in two ways:</p>
<ol>
<li><a href="struct.ActionPermit.html#method.perform" title="method cancel_safe_futures::sync::ActionPermit::perform"><code>perform()</code></a>, which accepts a synchronous closure that cannot have await points within it.</li>
<li><a href="struct.ActionPermit.html#method.perform_async_boxed" title="method cancel_safe_futures::sync::ActionPermit::perform_async_boxed"><code>perform_async_boxed()</code></a> and <a href="struct.ActionPermit.html#method.perform_async_boxed_local" title="method cancel_safe_futures::sync::ActionPermit::perform_async_boxed_local"><code>perform_async_boxed_local()</code></a>, which accept asynchronous
closures. If the future returned by these methods is cancelled in the middle of execution,
the mutex is marked as poisoned.</li>
</ol>
<p>In general, it is recommended that <a href="struct.ActionPermit.html#method.perform" title="method cancel_safe_futures::sync::ActionPermit::perform"><code>perform()</code></a> be used and mutexes not be held across await
points at all, since that can cause performance and correctness issues.</p>
<p>Not using an RAII guard like <a href="https://doc.rust-lang.org/1.81.0/std/sync/mutex/struct.MutexGuard.html" title="struct std::sync::mutex::MutexGuard"><code>std::sync::MutexGuard</code></a> does mean that there are patterns that
are not possible with this mutex. For example, you cannot perform a pattern where:</p>
<ol>
<li>You acquire a lock <em>L₁</em>.</li>
<li>You acquire a second lock <em>L₂</em>.</li>
<li>You release <em>L₁</em>.</li>
<li>You release <em>L₂</em>.</li>
</ol>
<p>If you really do need to do this or more complicated patterns, <a href="https://doc.rust-lang.org/1.81.0/std/sync/mutex/struct.Mutex.html" title="struct std::sync::mutex::Mutex"><code>std::sync::Mutex</code></a> and
<a href="../../tokio/sync/mutex/struct.Mutex.html" title="struct tokio::sync::mutex::Mutex"><code>tokio::sync::Mutex</code></a> remain available.</p>
<h2 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h2>
<p>The above example, rewritten to use a <code>RobustMutex</code>, would look like:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>cancel_safe_futures::sync::RobustMutex;
<span class="kw">use </span>std::collections::HashMap;

<span class="kw">struct </span>MyStruct {
    map1: HashMap&lt;String, String&gt;,
    map2: HashMap&lt;String, u32&gt;,
}

<span class="kw">impl </span>MyStruct {
    <span class="kw">fn </span>new() -&gt; <span class="self">Self </span>{ <span class="comment">/* ... */ </span>}
}

<span class="attr">#[tokio::main]
</span><span class="kw">async fn </span>main() {
    <span class="kw">let </span>mutex = RobustMutex::new(MyStruct::new());

    <span class="kw">let </span><span class="kw-2">mut </span>permit = mutex.lock().<span class="kw">await</span>.unwrap();  <span class="comment">// note unwrap() here
    </span>permit.perform(|data| {
        data.map1.insert(<span class="string">"hello"</span>.to_owned(), <span class="string">"world"</span>.to_owned());  <span class="comment">// (1)
        // ... some code in between
        </span>data.map2.insert(<span class="string">"hello"</span>.to_owned(), <span class="number">42</span>);  <span class="comment">// (2)
    </span>});
}</code></pre></div>
<h2 id="features"><a class="doc-anchor" href="#features">§</a>Features</h2>
<p>Basic mutex operations are supported. In the future, this will support:</p>
<ul>
<li>An <code>OwnedActionPermit</code>, similar to <a href="../../tokio/sync/mutex/struct.OwnedMutexGuard.html" title="struct tokio::sync::mutex::OwnedMutexGuard"><code>tokio::sync::OwnedMutexGuard</code></a>.</li>
</ul>
<p>Mapped action permits similar to <a href="../../tokio/sync/mutex/struct.MappedMutexGuard.html" title="struct tokio::sync::mutex::MappedMutexGuard"><code>tokio::sync::MappedMutexGuard</code></a> will likely not be supported
because it’s hard to define panic and cancel safety in that scenario.</p>
<h2 id="why-robust"><a class="doc-anchor" href="#why-robust">§</a>Why “robust”?</h2>
<p>The name is derived from POSIX’s <a href="https://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_mutexattr_getrobust.html"><code>pthread_mutexattr_getrobust</code> and
<code>pthread_mutexattr_setrobust</code></a>.
These functions aim to achieve very similar goals to this mutex, except in slightly different
circumstances (<em>thread</em> cancellations and terminations rather than <em>task</em> cancellations and
panics).</p>
</div></details><h2 id="implementations" class="section-header">Implementations<a href="#implementations" class="anchor">§</a></h2><div id="implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-RobustMutex%3CT%3E" class="impl"><a class="src rightside" href="../../src/cancel_safe_futures/sync/mutex.rs.html#182-469">source</a><a href="#impl-RobustMutex%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="https://doc.rust-lang.org/1.81.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; <a class="struct" href="struct.RobustMutex.html" title="struct cancel_safe_futures::sync::RobustMutex">RobustMutex</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.new" class="method"><a class="src rightside" href="../../src/cancel_safe_futures/sync/mutex.rs.html#193-201">source</a><h4 class="code-header">pub fn <a href="#method.new" class="fn">new</a>(value: T) -&gt; Self<div class="where">where
    T: <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h4></section></summary><div class="docblock"><p>Creates a new lock in an unlocked state ready for use.</p>
<h5 id="examples-1"><a class="doc-anchor" href="#examples-1">§</a>Examples</h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>cancel_safe_futures::sync::RobustMutex;

<span class="kw">let </span>lock = RobustMutex::new(<span class="number">5</span>);</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.const_new" class="method"><a class="src rightside" href="../../src/cancel_safe_futures/sync/mutex.rs.html#214-222">source</a><h4 class="code-header">pub const fn <a href="#method.const_new" class="fn">const_new</a>(value: T) -&gt; Self<div class="where">where
    T: <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h4></section><span class="item-info"><div class="stab portability">Available on <strong>crate feature <code>parking_lot</code></strong> only.</div></span></summary><div class="docblock"><p>Creates a new lock in an unlocked state ready for use.</p>
<h5 id="examples-2"><a class="doc-anchor" href="#examples-2">§</a>Examples</h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>cancel_safe_futures::sync::RobustMutex;

<span class="kw">static </span>LOCK: RobustMutex&lt;i32&gt; = RobustMutex::const_new(<span class="number">5</span>);</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.lock" class="method"><a class="src rightside" href="../../src/cancel_safe_futures/sync/mutex.rs.html#250-253">source</a><h4 class="code-header">pub async fn <a href="#method.lock" class="fn">lock</a>(&amp;self) -&gt; <a class="type" href="type.LockResult.html" title="type cancel_safe_futures::sync::LockResult">LockResult</a>&lt;<a class="struct" href="struct.ActionPermit.html" title="struct cancel_safe_futures::sync::ActionPermit">ActionPermit</a>&lt;'_, T&gt;&gt;</h4></section></summary><div class="docblock"><p>Locks this mutex, causing the current task to yield until the lock has been acquired.  When
the lock has been acquired, function returns a <a href="struct.ActionPermit.html" title="struct cancel_safe_futures::sync::ActionPermit"><code>ActionPermit</code></a>.</p>
<h5 id="errors"><a class="doc-anchor" href="#errors">§</a>Errors</h5>
<p>If another user of this mutex panicked while holding the mutex, then this call will return
an error once the mutex is acquired.</p>
<h5 id="cancel-safety-1"><a class="doc-anchor" href="#cancel-safety-1">§</a>Cancel safety</h5>
<p>This method uses a queue to fairly distribute locks in the order they were requested.
Cancelling a call to <code>lock</code> makes you lose your place in the queue.</p>
<h5 id="examples-3"><a class="doc-anchor" href="#examples-3">§</a>Examples</h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>cancel_safe_futures::sync::RobustMutex;

<span class="attr">#[tokio::main]
</span><span class="kw">async fn </span>main() {
    <span class="kw">let </span>mutex = RobustMutex::new(<span class="number">1</span>);

    <span class="kw">let </span><span class="kw-2">mut </span>permit = mutex.lock().<span class="kw">await</span>.unwrap();
    permit.perform(|n| <span class="kw-2">*</span>n = <span class="number">2</span>);
}</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.blocking_lock" class="method"><a class="src rightside" href="../../src/cancel_safe_futures/sync/mutex.rs.html#300-303">source</a><h4 class="code-header">pub fn <a href="#method.blocking_lock" class="fn">blocking_lock</a>(&amp;self) -&gt; <a class="type" href="type.LockResult.html" title="type cancel_safe_futures::sync::LockResult">LockResult</a>&lt;<a class="struct" href="struct.ActionPermit.html" title="struct cancel_safe_futures::sync::ActionPermit">ActionPermit</a>&lt;'_, T&gt;&gt;</h4></section></summary><div class="docblock"><p>Blockingly locks this <code>Mutex</code>. When the lock has been acquired, the function returns a
<a href="struct.ActionPermit.html" title="struct cancel_safe_futures::sync::ActionPermit"><code>ActionPermit</code></a>.</p>
<p>This method is intended for use cases where you need to use this mutex in asynchronous code
as well as in synchronous code.</p>
<h5 id="errors-1"><a class="doc-anchor" href="#errors-1">§</a>Errors</h5>
<p>If another user of this mutex panicked while holding the mutex, then this call will return
an error once the mutex is acquired.</p>
<h5 id="panics"><a class="doc-anchor" href="#panics">§</a>Panics</h5>
<p>This function panics if called within an asynchronous execution context.</p>
<h5 id="examples-4"><a class="doc-anchor" href="#examples-4">§</a>Examples</h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>cancel_safe_futures::sync::RobustMutex;
<span class="kw">use </span>std::sync::Arc;

<span class="attr">#[tokio::main]
</span><span class="kw">async fn </span>main() {
    <span class="kw">let </span>mutex = Arc::new(RobustMutex::new(<span class="number">1</span>));
    <span class="kw">let </span>permit = mutex.lock().<span class="kw">await</span>.unwrap();

    <span class="kw">let </span>mutex1 = Arc::clone(<span class="kw-2">&amp;</span>mutex);
    <span class="kw">let </span>blocking_task = tokio::task::spawn_blocking(<span class="kw">move </span>|| {
        <span class="comment">// This shall block until the `lock` is released.
        </span><span class="kw">let </span>permit = mutex1.blocking_lock().unwrap();
        permit.perform(|n| <span class="kw-2">*</span>n = <span class="number">2</span>);
    });

    permit.perform(|n| { <span class="macro">assert_eq!</span>(<span class="kw-2">*</span>n, <span class="number">1</span>) });

    <span class="comment">// Await the completion of the blocking task.
    </span>blocking_task.<span class="kw">await</span>.unwrap();

    <span class="comment">// Assert uncontended.
    </span><span class="kw">let </span>permit = mutex.try_lock().unwrap();
    permit.perform(|n| { <span class="macro">assert_eq!</span>(<span class="kw-2">*</span>n, <span class="number">2</span>) });
}</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.try_lock" class="method"><a class="src rightside" href="../../src/cancel_safe_futures/sync/mutex.rs.html#328-333">source</a><h4 class="code-header">pub fn <a href="#method.try_lock" class="fn">try_lock</a>(&amp;self) -&gt; <a class="type" href="type.TryLockResult.html" title="type cancel_safe_futures::sync::TryLockResult">TryLockResult</a>&lt;<a class="struct" href="struct.ActionPermit.html" title="struct cancel_safe_futures::sync::ActionPermit">ActionPermit</a>&lt;'_, T&gt;&gt;</h4></section></summary><div class="docblock"><p>Attempts to acquire the lock, returning an <a href="struct.ActionPermit.html" title="struct cancel_safe_futures::sync::ActionPermit"><code>ActionPermit</code></a> if successful.</p>
<h5 id="errors-2"><a class="doc-anchor" href="#errors-2">§</a>Errors</h5>
<p>Returns <a href="enum.TryLockError.html#variant.WouldBlock" title="variant cancel_safe_futures::sync::TryLockError::WouldBlock"><code>TryLockError::WouldBlock</code></a> if the lock is currently held somewhere else.</p>
<p>Returns <a href="enum.TryLockError.html#variant.Poisoned" title="variant cancel_safe_futures::sync::TryLockError::Poisoned"><code>TryLockError::Poisoned</code></a> if another thread panicked while holding the lock.</p>
<h5 id="examples-5"><a class="doc-anchor" href="#examples-5">§</a>Examples</h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>cancel_safe_futures::sync::RobustMutex;

<span class="attr">#[tokio::main]
</span><span class="kw">async fn </span>main() {
    <span class="kw">let </span>mutex = RobustMutex::new(<span class="number">1</span>);

    <span class="kw">let </span>permit = mutex.try_lock().unwrap();
    permit.perform(|n| {
        <span class="macro">assert_eq!</span>(<span class="kw-2">*</span>n, <span class="number">1</span>);
    });
}</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.is_poisoned" class="method"><a class="src rightside" href="../../src/cancel_safe_futures/sync/mutex.rs.html#342-344">source</a><h4 class="code-header">pub fn <a href="#method.is_poisoned" class="fn">is_poisoned</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.81.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Determines whether the mutex is poisoned.</p>
<p>This is equivalent to <a href="struct.RobustMutex.html#method.is_panic_poisoned" title="method cancel_safe_futures::sync::RobustMutex::is_panic_poisoned"><code>Self::is_panic_poisoned</code></a><code>||</code><a href="struct.RobustMutex.html#method.is_cancel_poisoned" title="method cancel_safe_futures::sync::RobustMutex::is_cancel_poisoned"><code>Self::is_cancel_poisoned</code></a>.</p>
<p>If another task is active, the mutex can still become poisoned at any time. You should not
trust a <code>false</code> value for program correctness without additional synchronization.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.is_panic_poisoned" class="method"><a class="src rightside" href="../../src/cancel_safe_futures/sync/mutex.rs.html#374-376">source</a><h4 class="code-header">pub fn <a href="#method.is_panic_poisoned" class="fn">is_panic_poisoned</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.81.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Determines whether the mutex is poisoned due to a panic.</p>
<p>If another task is active, the mutex can still become poisoned at any time. You should not
trust a <code>false</code> value for program correctness without additional synchronization.</p>
<h5 id="examples-6"><a class="doc-anchor" href="#examples-6">§</a>Examples</h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>cancel_safe_futures::sync::RobustMutex;
<span class="kw">use </span>std::sync::Arc;


<span class="kw">let </span>mutex = Arc::new(RobustMutex::new(<span class="number">0</span>));
<span class="kw">let </span>c_mutex = Arc::clone(<span class="kw-2">&amp;</span>mutex);

<span class="kw">let _ </span>= tokio::task::spawn(<span class="kw">async move </span>{
    <span class="kw">let </span>permit = c_mutex.lock().<span class="kw">await</span>.unwrap();
    permit.perform(|<span class="kw">_</span>| {
        <span class="macro">panic!</span>(); <span class="comment">// the mutex gets poisoned
    </span>});
}).<span class="kw">await</span>;

<span class="macro">assert!</span>(mutex.is_panic_poisoned());</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.is_cancel_poisoned" class="method"><a class="src rightside" href="../../src/cancel_safe_futures/sync/mutex.rs.html#418-420">source</a><h4 class="code-header">pub fn <a href="#method.is_cancel_poisoned" class="fn">is_cancel_poisoned</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.81.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Determines whether this mutex is poisoned due to a cancellation.</p>
<p>If another task is active, the mutex can still become poisoned at any time. You should not
trust a <code>false</code> value for program correctness without additional synchronization.</p>
<h5 id="examples-7"><a class="doc-anchor" href="#examples-7">§</a>Examples</h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>cancel_safe_futures::sync::RobustMutex;
<span class="kw">use </span>futures::FutureExt;
<span class="kw">use </span>std::sync::Arc;


<span class="kw">let </span>mutex = Arc::new(RobustMutex::new(<span class="number">0</span>));
<span class="kw">let </span>c_mutex = Arc::clone(<span class="kw-2">&amp;</span>mutex);

tokio::task::spawn(<span class="kw">async move </span>{
    <span class="kw">let </span>permit = c_mutex.lock().<span class="kw">await</span>.unwrap();
    <span class="kw">let </span>fut = permit.perform_async_boxed(|n| <span class="kw">async move </span>{
        <span class="comment">// Sleep for 1 second.
        </span>tokio::time::sleep(std::time::Duration::from_secs(<span class="number">1</span>)).<span class="kw">await</span>;
        <span class="kw-2">*</span>n = <span class="number">1</span>;
    }.boxed());
    <span class="macro">tokio::select!</span> {
        <span class="kw">_ </span>= fut =&gt; {
            <span class="macro">panic!</span>(<span class="string">"this branch should not be encountered"</span>);
        }
        <span class="kw">_ </span>= tokio::time::sleep(std::time::Duration::from_millis(<span class="number">100</span>)) =&gt; {
            <span class="comment">// Exit the task, causing `fut` to be cancelled after 100ms.
        </span>}
    }
}).<span class="kw">await</span>.unwrap();

<span class="macro">assert!</span>(mutex.is_cancel_poisoned());
</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_mut" class="method"><a class="src rightside" href="../../src/cancel_safe_futures/sync/mutex.rs.html#438-440">source</a><h4 class="code-header">pub fn <a href="#method.get_mut" class="fn">get_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.81.0/std/primitive.reference.html">&amp;mut T</a></h4></section></summary><div class="docblock"><p>Returns a mutable reference to the underlying data.</p>
<p>Since this call borrows the <code>Mutex</code> mutably, no actual locking needs to
take place – the mutable borrow statically guarantees no locks exist.</p>
<h5 id="examples-8"><a class="doc-anchor" href="#examples-8">§</a>Examples</h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>cancel_safe_futures::sync::RobustMutex;

<span class="kw">let </span><span class="kw-2">mut </span>mutex = RobustMutex::new(<span class="number">1</span>);

<span class="kw">let </span>n = mutex.get_mut();
<span class="kw-2">*</span>n = <span class="number">2</span>;</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.into_inner" class="method"><a class="src rightside" href="../../src/cancel_safe_futures/sync/mutex.rs.html#462-468">source</a><h4 class="code-header">pub fn <a href="#method.into_inner" class="fn">into_inner</a>(self) -&gt; <a class="type" href="type.LockResult.html" title="type cancel_safe_futures::sync::LockResult">LockResult</a>&lt;T&gt;<div class="where">where
    T: <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h4></section></summary><div class="docblock"><p>Consumes the mutex, returning the underlying data.</p>
<h5 id="errors-3"><a class="doc-anchor" href="#errors-3">§</a>Errors</h5>
<p>If another user of this mutex panicked while holding the mutex, then this call will return
an error.</p>
<h5 id="examples-9"><a class="doc-anchor" href="#examples-9">§</a>Examples</h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>cancel_safe_futures::sync::RobustMutex;

<span class="attr">#[tokio::main]
</span><span class="kw">async fn </span>main() {
    <span class="kw">let </span>mutex = RobustMutex::new(<span class="number">1</span>);

    <span class="kw">let </span>n = mutex.into_inner().unwrap();
    <span class="macro">assert_eq!</span>(n, <span class="number">1</span>);
}</code></pre></div>
</div></details></div></details></div><h2 id="trait-implementations" class="section-header">Trait Implementations<a href="#trait-implementations" class="anchor">§</a></h2><div id="trait-implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-Debug-for-RobustMutex%3CT%3E" class="impl"><a class="src rightside" href="../../src/cancel_safe_futures/sync/mutex.rs.html#488-498">source</a><a href="#impl-Debug-for-RobustMutex%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="https://doc.rust-lang.org/1.81.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>&gt; <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> for <a class="struct" href="struct.RobustMutex.html" title="struct cancel_safe_futures::sync::RobustMutex">RobustMutex</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.fmt" class="method trait-impl"><a class="src rightside" href="../../src/cancel_safe_futures/sync/mutex.rs.html#489-497">source</a><a href="#method.fmt" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.81.0/core/fmt/trait.Debug.html#tymethod.fmt" class="fn">fmt</a>(&amp;self, f: &amp;mut <a class="struct" href="https://doc.rust-lang.org/1.81.0/core/fmt/struct.Formatter.html" title="struct core::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="type" href="https://doc.rust-lang.org/1.81.0/core/fmt/type.Result.html" title="type core::fmt::Result">Result</a></h4></section></summary><div class='docblock'>Formats the value using the given formatter. <a href="https://doc.rust-lang.org/1.81.0/core/fmt/trait.Debug.html#tymethod.fmt">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Default-for-RobustMutex%3CT%3E" class="impl"><a class="src rightside" href="../../src/cancel_safe_futures/sync/mutex.rs.html#471-479">source</a><a href="#impl-Default-for-RobustMutex%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/default/trait.Default.html" title="trait core::default::Default">Default</a> for <a class="struct" href="struct.RobustMutex.html" title="struct cancel_safe_futures::sync::RobustMutex">RobustMutex</a>&lt;T&gt;<div class="where">where
    T: <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/default/trait.Default.html" title="trait core::default::Default">Default</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.default" class="method trait-impl"><a class="src rightside" href="../../src/cancel_safe_futures/sync/mutex.rs.html#476-478">source</a><a href="#method.default" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.81.0/core/default/trait.Default.html#tymethod.default" class="fn">default</a>() -&gt; Self</h4></section></summary><div class='docblock'>Returns the “default value” for a type. <a href="https://doc.rust-lang.org/1.81.0/core/default/trait.Default.html#tymethod.default">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3CT%3E-for-RobustMutex%3CT%3E" class="impl"><a class="src rightside" href="../../src/cancel_safe_futures/sync/mutex.rs.html#481-486">source</a><a href="#impl-From%3CT%3E-for-RobustMutex%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for <a class="struct" href="struct.RobustMutex.html" title="struct cancel_safe_futures::sync::RobustMutex">RobustMutex</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from" class="method trait-impl"><a class="src rightside" href="../../src/cancel_safe_futures/sync/mutex.rs.html#483-485">source</a><a href="#method.from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.81.0/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(t: T) -&gt; Self</h4></section></summary><div class='docblock'>Converts to this type from the input type.</div></details></div></details></div><h2 id="synthetic-implementations" class="section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor">§</a></h2><div id="synthetic-implementations-list"><section id="impl-Freeze-for-RobustMutex%3CT%3E" class="impl"><a href="#impl-Freeze-for-RobustMutex%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; !<a class="trait" href="https://doc.rust-lang.org/1.81.0/core/marker/trait.Freeze.html" title="trait core::marker::Freeze">Freeze</a> for <a class="struct" href="struct.RobustMutex.html" title="struct cancel_safe_futures::sync::RobustMutex">RobustMutex</a>&lt;T&gt;</h3></section><section id="impl-RefUnwindSafe-for-RobustMutex%3CT%3E" class="impl"><a href="#impl-RefUnwindSafe-for-RobustMutex%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; !<a class="trait" href="https://doc.rust-lang.org/1.81.0/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="struct.RobustMutex.html" title="struct cancel_safe_futures::sync::RobustMutex">RobustMutex</a>&lt;T&gt;</h3></section><section id="impl-Send-for-RobustMutex%3CT%3E" class="impl"><a href="#impl-Send-for-RobustMutex%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="struct.RobustMutex.html" title="struct cancel_safe_futures::sync::RobustMutex">RobustMutex</a>&lt;T&gt;<div class="where">where
    T: <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + ?<a class="trait" href="https://doc.rust-lang.org/1.81.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section><section id="impl-Sync-for-RobustMutex%3CT%3E" class="impl"><a href="#impl-Sync-for-RobustMutex%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="struct.RobustMutex.html" title="struct cancel_safe_futures::sync::RobustMutex">RobustMutex</a>&lt;T&gt;<div class="where">where
    T: <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + ?<a class="trait" href="https://doc.rust-lang.org/1.81.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section><section id="impl-Unpin-for-RobustMutex%3CT%3E" class="impl"><a href="#impl-Unpin-for-RobustMutex%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="struct.RobustMutex.html" title="struct cancel_safe_futures::sync::RobustMutex">RobustMutex</a>&lt;T&gt;<div class="where">where
    T: <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> + ?<a class="trait" href="https://doc.rust-lang.org/1.81.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section><section id="impl-UnwindSafe-for-RobustMutex%3CT%3E" class="impl"><a href="#impl-UnwindSafe-for-RobustMutex%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; !<a class="trait" href="https://doc.rust-lang.org/1.81.0/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a> for <a class="struct" href="struct.RobustMutex.html" title="struct cancel_safe_futures::sync::RobustMutex">RobustMutex</a>&lt;T&gt;</h3></section></div><h2 id="blanket-implementations" class="section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor">§</a></h2><div id="blanket-implementations-list"><details class="toggle implementors-toggle"><summary><section id="impl-Any-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.81.0/src/core/any.rs.html#140">source</a><a href="#impl-Any-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T<div class="where">where
    T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/1.81.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.81.0/src/core/any.rs.html#141">source</a><a href="#method.type_id" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.81.0/core/any/trait.Any.html#tymethod.type_id" class="fn">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.81.0/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4></section></summary><div class='docblock'>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/1.81.0/core/any/trait.Any.html#tymethod.type_id">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.81.0/src/core/borrow.rs.html#209">source</a><a href="#impl-Borrow%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T<div class="where">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/1.81.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.81.0/src/core/borrow.rs.html#211">source</a><a href="#method.borrow" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.81.0/core/borrow/trait.Borrow.html#tymethod.borrow" class="fn">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.81.0/std/primitive.reference.html">&amp;T</a></h4></section></summary><div class='docblock'>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.81.0/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.81.0/src/core/borrow.rs.html#217">source</a><a href="#impl-BorrowMut%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T<div class="where">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/1.81.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.81.0/src/core/borrow.rs.html#218">source</a><a href="#method.borrow_mut" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.81.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fn">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.81.0/std/primitive.reference.html">&amp;mut T</a></h4></section></summary><div class='docblock'>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.81.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-From%3C!%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.81.0/src/core/convert/mod.rs.html#782">source</a><a href="#impl-From%3C!%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.81.0/std/primitive.never.html">!</a>&gt; for T</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-2" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.81.0/src/core/convert/mod.rs.html#783">source</a><a href="#method.from-2" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.81.0/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(t: <a class="primitive" href="https://doc.rust-lang.org/1.81.0/std/primitive.never.html">!</a>) -&gt; T</h4></section></summary><div class='docblock'>Converts to this type from the input type.</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-From%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.81.0/src/core/convert/mod.rs.html#765">source</a><a href="#impl-From%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-1" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.81.0/src/core/convert/mod.rs.html#768">source</a><a href="#method.from-1" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.81.0/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.81.0/src/core/convert/mod.rs.html#748-750">source</a><a href="#impl-Into%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T<div class="where">where
    U: <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.into" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.81.0/src/core/convert/mod.rs.html#758">source</a><a href="#method.into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.81.0/core/convert/trait.Into.html#tymethod.into" class="fn">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code><a href="https://doc.rust-lang.org/1.81.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.81.0/src/core/convert/mod.rs.html#805-807">source</a><a href="#impl-TryFrom%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T<div class="where">where
    U: <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl"><a href="#associatedtype.Error" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.81.0/core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="https://doc.rust-lang.org/1.81.0/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.81.0/src/core/convert/mod.rs.html#812">source</a><a href="#method.try_from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.81.0/core/convert/trait.TryFrom.html#tymethod.try_from" class="fn">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.81.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.81.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.81.0/src/core/convert/mod.rs.html#790-792">source</a><a href="#impl-TryInto%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T<div class="where">where
    U: <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl"><a href="#associatedtype.Error-1" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.81.0/core/convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.81.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.81.0/src/core/convert/mod.rs.html#797">source</a><a href="#method.try_into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.81.0/core/convert/trait.TryInto.html#tymethod.try_into" class="fn">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.81.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.81.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details></div></section></div></main></body></html>